2025-10-29 12:05:13,201 - __main__ - INFO - ✅ 真實占星計算引擎載入成功
2025-10-29 12:05:13,203 - __main__ - INFO - 🌟 虹靈御所占星系統 v2.0 啟動中...
2025-10-29 12:05:13,203 - __main__ - INFO - 🔧 計算引擎: Kerykeion Swiss Ephemeris v4.26.3
2025-10-29 12:05:13,203 - __main__ - INFO - 🌐 端口: 5000
2025-10-29 12:05:13,203 - __main__ - INFO - 📱 CORS: 已啟用
2025-10-29 12:05:13,204 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.1.0.64:5000
2025-10-29 12:05:13,204 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-10-29 12:05:15,458 - __main__ - INFO - API請求: GET /api/health - IP: 127.0.0.1
2025-10-29 12:05:15,458 - __main__ - INFO - 健康檢查完成
2025-10-29 12:05:15,459 - werkzeug - INFO - 127.0.0.1 - - [29/Oct/2025 12:05:15] "GET /api/health HTTP/1.1" 200 -
2025-10-29 12:07:58,139 - __main__ - INFO - ✅ 真實占星計算引擎載入成功
2025-10-29 12:07:58,140 - __main__ - INFO - 🌟 虹靈御所占星系統 v2.0 啟動中...
2025-10-29 12:07:58,140 - __main__ - INFO - 🔧 計算引擎: Kerykeion Swiss Ephemeris v4.26.3
2025-10-29 12:07:58,140 - __main__ - INFO - 🌐 端口: 5000
2025-10-29 12:07:58,140 - __main__ - INFO - 📱 CORS: 已啟用
2025-10-29 12:07:58,142 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.1.0.64:5000
2025-10-29 12:07:58,142 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-10-29 12:08:15,002 - __main__ - INFO - API請求: GET /api/health - IP: 127.0.0.1
2025-10-29 12:08:15,003 - __main__ - INFO - 健康檢查完成
2025-10-29 12:08:15,003 - werkzeug - INFO - 127.0.0.1 - - [29/Oct/2025 12:08:15] "GET /api/health HTTP/1.1" 200 -
2025-10-29 12:08:25,476 - __main__ - INFO - API請求: POST /api/calculate_chart - IP: 127.0.0.1
2025-10-29 12:08:25,476 - __main__ - INFO - 開始為用戶 測試用戶 計算星盤和角色
2025-10-29 12:08:25,477 - root - WARNING - 
********
NO GEONAMES USERNAME SET!
Using the default geonames username is not recommended, please set a custom one!
You can get one for free here:
https://www.geonames.org/login
Keep in mind that the default username is limited to 2000 requests per hour and is shared with everyone else using this library.
********
2025-10-29 12:08:25,477 - root - INFO - Fetching timezone/coordinates from geonames
2025-10-29 12:08:25,491 - root - ERROR - Error in fetching http://api.geonames.org/searchJSON: HTTPConnectionPool(host='api.geonames.org', port=80): Max retries exceeded with url: /searchJSON?q=%E5%8F%B0%E5%8C%97&country=TW&username=century.boy&maxRows=1&style=SHORT&featureClass=A&featureClass=P (Caused by NameResolutionError("<urllib3.connection.HTTPConnection object at 0x7ff7704ea840>: Failed to resolve 'api.geonames.org' ([Errno -5] No address associated with hostname)"))
2025-10-29 12:08:25,491 - root - ERROR - Error in fetching timezone: 'lat'
2025-10-29 12:08:25,491 - __main__ - ERROR - 角色生成失敗: 星盤計算失敗: No data found for this city, try again! Maybe check your connection?
2025-10-29 12:08:25,493 - __main__ - ERROR - 錯誤詳情: Traceback (most recent call last):
  File "/home/runner/work/star/star/astro_consultant.py", line 67, in calculate_natal_chart
    chart = kr.AstrologicalSubject(
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/.local/lib/python3.12/site-packages/kerykeion/astrological_subject.py", line 367, in __init__
    self._fetch_and_set_tz_and_coordinates_from_geonames()
  File "/home/runner/.local/lib/python3.12/site-packages/kerykeion/astrological_subject.py", line 435, in _fetch_and_set_tz_and_coordinates_from_geonames
    raise KerykeionException("No data found for this city, try again! Maybe check your connection?")
kerykeion.kr_types.kerykeion_exception.KerykeionException: No data found for this city, try again! Maybe check your connection?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/runner/work/star/star/main.py", line 538, in calculate_chart
    result = calculate_with_real_engine(data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/star/star/main.py", line 573, in calculate_with_real_engine
    chart_data = astrologer.calculate_natal_chart(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/star/star/astro_consultant.py", line 139, in calculate_natal_chart
    raise Exception(f"星盤計算失敗: {str(e)}")
Exception: 星盤計算失敗: No data found for this city, try again! Maybe check your connection?

2025-10-29 12:08:25,493 - __main__ - WARNING - 錯誤回應: 500 - /api/calculate_chart
2025-10-29 12:08:25,493 - werkzeug - INFO - 127.0.0.1 - - [29/Oct/2025 12:08:25] "[35m[1mPOST /api/calculate_chart HTTP/1.1[0m" 500 -
2025-10-29 12:09:01,311 - __main__ - INFO - ✅ 真實占星計算引擎載入成功
2025-10-29 12:09:01,313 - __main__ - INFO - 🌟 虹靈御所占星系統 v2.0 啟動中...
2025-10-29 12:09:01,313 - __main__ - INFO - 🔧 計算引擎: Kerykeion Swiss Ephemeris v4.26.3
2025-10-29 12:09:01,313 - __main__ - INFO - 🌐 端口: 5000
2025-10-29 12:09:01,313 - __main__ - INFO - 📱 CORS: 已啟用
2025-10-29 12:09:01,314 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.1.0.64:5000
2025-10-29 12:09:01,314 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-10-29 12:09:12,604 - __main__ - INFO - API請求: POST /api/calculate_chart - IP: 127.0.0.1
2025-10-29 12:09:12,604 - __main__ - INFO - 開始為用戶 測試用戶 計算星盤和角色
2025-10-29 12:09:12,604 - root - INFO - No nation specified, using GB as default
2025-10-29 12:09:12,616 - __main__ - INFO - 角色生成完成，用時 0.012秒
2025-10-29 12:09:12,617 - werkzeug - INFO - 127.0.0.1 - - [29/Oct/2025 12:09:12] "POST /api/calculate_chart HTTP/1.1" 200 -
